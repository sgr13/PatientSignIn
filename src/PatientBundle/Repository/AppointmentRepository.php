<?php

namespace PatientBundle\Repository;

use Doctrine\ORM\EntityRepository;

/**
 * AppointmentRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class AppointmentRepository extends EntityRepository
{
    public function findDay($year, $month, $day)
    {
        $daySchedule = $this->getEntityManager()->createQuery(
            'Select p from PatientBundle:Appointment p WHERE p.year LIKE :year AND p.month LIKE :month AND p.day LIKE :day')
            ->setParameter('year', $year)
            ->setParameter('month', $month)
            ->setParameter('day', $day)
            ->getResult();

        return $daySchedule;
    }

    public function findVisitsByMonth($year, $month, $day)
    {
        $visits = $this->getEntityManager()->createQuery(
            'Select p from PatientBundle:Appointment p WHERE p.year LIKE :year AND p.month LIKE :month AND p.day LIKE :day ORDER BY p.hour')
            ->setParameter('year', $year)
            ->setParameter('month', $month)
            ->setParameter('day', $day)
            ->getResult();

        return $visits;
    }

    public function findVisits($year, $month)
    {
        $visits = $this->getEntityManager()->createQuery(
            'Select p from PatientBundle:Appointment p WHERE p.year LIKE :year AND p.month LIKE :month')
            ->setParameter('year', $year)
            ->setParameter('month', $month)
            ->getResult();

        return $visits;
    }
}
